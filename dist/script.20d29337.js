parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"mpVp":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}function n(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=c();return function(){var n,o=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return a(this,n)}}function a(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?s(e):n}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(e,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l(this,t),f(this,"date",new Date),f(this,"id",(Date.now()+"").slice(-10)),f(this,"save",!0),f(this,"clicks",0),this.coords=e,this.distance=n,this.duration=o,this.del=r}return d(t,[{key:"_setDescription",value:function(){this.description="".concat(this.type[0].toUpperCase()).concat(this.type.slice(1)," on ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]," ").concat(this.date.getDate())}},{key:"click",value:function(){this.clicks++}}]),t}(),v=function(t){o(n,h);var e=i(n);function n(t,o,r,i){var a;return l(this,n),f(s(a=e.call(this,t,o,r)),"type","running"),a.cadence=i,a.calcPace(),a._setDescription(),a}return d(n,[{key:"calcPace",value:function(){return this.pace=this.duration/this.distance,this.pace}}]),n}(),_=function(t){o(n,h);var e=i(n);function n(t,o,r,i,a){var c;return l(this,n),f(s(c=e.call(this,t,o,r)),"type","cycling"),c.elevationGain=i,c.calcSpeed(),c._setDescription(),c}return d(n,[{key:"calcSpeed",value:function(){return this.speed=this.distance/(this.duration/60),this.speed}}]),n}(),y=document.querySelector(".form"),w=document.querySelector(".workouts"),k=document.querySelector(".form__input--type"),g=document.querySelector(".form__input--distance"),m=document.querySelector(".form__input--duration"),b=document.querySelector(".form__input--cadence"),S=document.querySelector(".form__input--elevation"),P=document.querySelector(".btn__reset"),O=new WeakMap,E=new WeakMap,M=new WeakMap,W=new WeakMap,T=function(){function t(){l(this,t),O.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:13}),M.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:[]}),this._getPosition(),this._getLocalStorage(),y.addEventListener("submit",this._newWorkout.bind(this)),k.addEventListener("change",this._toggleElevationField),w.addEventListener("click",this._moveToPopup.bind(this)),P.addEventListener("click",this._reset),w.addEventListener("click",this._delete.bind(this))}return d(t,[{key:"_select",value:function(){console.log(w.closest("btn__delete"));n(this,W).findIndex(function(t){return console.log(t.id)})}},{key:"_getPosition",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),function(){alert("Coud not get your location")})}},{key:"_loadMap",value:function(t){var o=this,r=t.coords.latitude,i=t.coords.longitude;console.log("https://www.google.com/maps/@".concat(r,",").concat(i));var a=[r,i];e(this,O,L.map("map").setView(a,n(this,E))),L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n(this,O)),n(this,O).on("click",this._showForm.bind(this)),n(this,W).forEach(function(t){o.renderWorkoutMarker(t)})}},{key:"_showForm",value:function(t){e(this,M,t),y.classList.remove("hidden"),g.focus()}},{key:"_hideForm",value:function(){g.value=m.value=b.value=S.value="",y.style.display="none",y.classList.add("hidden"),setTimeout(function(){return y.style.display="grid"},1e3),g.focus()}},{key:"_toggleElevationField",value:function(){S.closest(".form__row").classList.toggle("form__row--hidden"),b.closest(".form__row").classList.toggle("form__row--hidden")}},{key:"_newWorkout",value:function(t){t.preventDefault();var e,o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return Number.isFinite(t)})},r=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return t>0})},i=k.value,a=+g.value,s=+m.value,c=n(this,M).latlng,u=c.lat,l=c.lng;if("running"===i){var p=+b.value;if(!o(a,s,p)||!r(a,s,p))return alert("Inputs have to be positive numbers!");e=new v([u,l],a,s,p)}if("cycling"===i){var d=+S.value;if(!o(a,s,d)||!r(a,s))return alert("Inputs have to be positive numbers!");e=new _([u,l],a,s,d)}n(this,W).push(e),console.log(n(this,W)),this.renderWorkoutMarker(e),console.log(e),this._renderWorkout(e),this._hideForm(),this._setLocalStorage()}},{key:"renderWorkoutMarker",value:function(t){L.marker(t.coords).addTo(n(this,O)).bindPopup(L.popup({maxWidth:250,minWidth:100,autoClose:!1,closeOnClick:!1,className:"".concat(t.type,"-popup")})).setPopupContent("".concat("running"===t.type?"üèÉ‚Äç‚ôÇ":"üö¥‚Äç‚ôÄÔ∏è"," ").concat(t.description)).openPopup()}},{key:"_renderWorkout",value:function(t){var e='\n    <li class="workout workout--'.concat(t.type,'" data-id="').concat(t.id,'">     \n            <h2 class="workout__title">').concat(t.description,' </h2>\n            <div class="workout__details">\n              <span class="workout__icon">').concat("running"===t.type?"üèÉ‚Äç‚ôÇ":"üö¥‚Äç‚ôÄÔ∏è",'</span>\n              <span class="workout__value">').concat(t.distance,'</span>\n              <span class="workout__unit">km</span>\n            </div>\n            <div class="workout__details">\n              <span class="workout__icon">‚è±</span>\n              <span class="workout__value">').concat(t.duration,'</span>\n              <span class="workout__unit">min</span>\n            </div>');"running"===t.type&&(e+='          \n        <div class="workout__details">\n          <span class="workout__icon">‚ö°Ô∏è</span>\n          <span class="workout__value">'.concat(t.pace.toFixed(1),'</span>\n          <span class="workout__unit">min/km</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">ü¶∂üèº</span>\n          <span class="workout__value">').concat(t.cadence,'</span>\n          <span class="workout__unit">spm</span>\n        </div>\n    </li>')),"cycling"===t.type&&(e+='          \n        <div class="workout__details">\n          <span class="workout__icon">‚ö°Ô∏è</span>\n          <span class="workout__value">'.concat(t.speed.toFixed(1),'</span>\n          <span class="workout__unit">km/h</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">‚õ∞</span>\n          <span class="workout__value">').concat(t.elevationGain,'</span>\n          <span class="workout__unit">m</span>\n        </div>\n    </li>')),y.insertAdjacentHTML("afterend",e)}},{key:"_moveToPopup",value:function(t){var e=t.target.closest(".workout");if(e){var o=n(this,W).find(function(t){return t.id===e.dataset.id});n(this,O).setView(o.coords,n(this,E),{animate:!0,pan:{duration:1}})}}},{key:"_setLocalStorage",value:function(){localStorage.setItem("workouts",JSON.stringify(n(this,W)))}},{key:"_getLocalStorage",value:function(){var t=this,o=JSON.parse(localStorage.getItem("workouts"));console.log(o),o&&(e(this,W,o),n(this,W).forEach(function(e){t._renderWorkout(e)}))}},{key:"_reset",value:function(){localStorage.removeItem("workouts"),location.reload()}}]),t}(),D=new T;
},{}]},{},["mpVp"], null)
//# sourceMappingURL=/script.20d29337.js.map